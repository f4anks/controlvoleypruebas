<!DOCTYPE html><html lang="es"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title id="pT">Ficha Atleta</title><script src="https://cdn.tailwindcss.com"></script><style>:root{--m:#001F3F;--e:#0074D9;--f:#f0f8ff}body{font-family:Inter,sans-serif;background:var(--f)}.b-h{background-image:url('img/banner.png');background-size:cover;background-position:center;min-height:200px;width:100%}.m-c{background:#f7f9fb;border-left:4px solid var(--e)}</style></head><body><div class="b-h"></div><div class="container mx-auto p-4"><header class="mb-6 flex justify-between items-center border-b pb-4"><div class="flex items-center space-x-3"><a href="index_ficha.html" class="text-gray-500"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 15l-3-3m0 0l3-3m-3 3h8M3 12a9 9 0 1118 0 9 9 0 01-18 0z"/></svg></a><h1 class="text-2xl font-black">Ficha: <span id="aNT" class="text-blue-600">...</span></h1></div><button onclick="logout()" class="py-1 px-3 bg-red-600 text-white rounded text-sm">Salir</button></header><div id="aDC" class="bg-white p-6 rounded-xl shadow-md"><p id="lM" class="text-center py-10 text-gray-400">Cargando...</p><div id="aD" class="hidden"><h2 class="text-lg font-bold mb-4 text-blue-800 border-b">Datos Personales</h2><div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6 text-sm"><div><span class="font-semibold text-gray-500">Nombre:</span> <span id="nAp" class="text-gray-900"></span></div><div><span class="font-semibold text-gray-500">Cédula:</span> <span id="cI" class="text-gray-900"></span></div><div><span class="font-semibold text-gray-500">Teléfono:</span> <span id="tel" class="text-gray-900"></span></div><div><span class="font-semibold text-gray-500">Nacimiento:</span> <span id="fNa" class="text-gray-900"></span></div><div><span class="font-semibold text-gray-500">Edad:</span> <span id="eda" class="text-gray-900 font-bold"></span></div><div><span class="font-semibold text-gray-500">Categoría:</span> <span id="cat" class="text-blue-600 font-bold"></span></div><div><span class="font-semibold text-gray-500">Camiseta:</span> <span id="nCa" class="text-blue-600 font-bold text-lg"></span></div></div><h2 class="text-lg font-bold mb-4 text-blue-800 border-b">Pagos y Métricas</h2><div class="grid grid-cols-2 lg:grid-cols-4 gap-4"><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Nómina <span id="nomT"></span></p> <p id="mPa" class="text-xl font-black text-gray-800"></p></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Último Pago</p> <p id="uPa" class="text-sm font-bold text-gray-800"></p></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Estado Solvencia</p> <span id="sSt" class="text-xs font-bold px-2 py-1 rounded-full"></span></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">IMC (Estado)</p> <p id="imc" class="text-xl font-black text-gray-800"></p> <span id="iSt" class="text-[10px] font-bold px-2 py-0.5 rounded-full inline-block"></span></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Peso (kg)</p> <p id="pes" class="text-xl font-black text-gray-800"></p></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Talla (m)</p> <p id="tal" class="text-xl font-black text-gray-800"></p></div><div class="m-c p-3 rounded"> <p class="text-xs text-gray-500">Proyección (m)</p> <p id="tPr" class="text-xl font-black text-gray-800"></p></div></div></div></div></div><script type="module">import{initializeApp as iA}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import{getAuth as gA,onAuthStateChanged as oA,signOut as sO}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import{getFirestore as gF,doc as dO,getDoc as gD}from"https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const cF={apiKey:"AIzaSyB5RB7mm1j-0gjCNTUEJTkyEqLjyZ3C7ws",authDomain:"datacontrolvoley-ff556.firebaseapp.com",projectId:"datacontrolvoley-ff556",storageBucket:"datacontrolvoley-ff556.firebasestorage.app",messagingSenderId:"516409072606",appId:"1:516409072606:web:132538dba358a077d71b4f"},app=iA(cF),auth=gA(app),db=gF(app);const _=id=>document.getElementById(id);const gP=n=>(new RegExp('[?&]'+n+'=([^&#]*)')).exec(window.location.search)?.[1]||'';const cE=d=>{if(!d)return'N/A';const b=new Date(d),n=new Date();let a=n.getFullYear()-b.getFullYear();if(n.getMonth()<b.getMonth()||(n.getMonth()===b.getMonth()&&n.getDate()<b.getDate()))a--;return a};const gI=v=>{if(!v||v===0)return{t:'N/A',c:'bg-gray-200 text-gray-600'};if(v<18.5)return{t:'BAJO PESO',c:'bg-yellow-400 text-white'};if(v<=24.9)return{t:'NORMAL',c:'bg-green-500 text-white'};if(v<=29.9)return{t:'SOBREPESO',c:'bg-orange-500 text-white'};return{t:'OBESIDAD',c:'bg-red-600 text-white'}};const cS=(f,p)=>{if(!f)return{s:'Insolvente',c:'bg-red-500 text-white'};const d=(new Date()-new Date(f))/(864e5),l=p==='quincenal'?15:30;return d<=l?{s:'Solvente',c:'bg-green-500 text-white'}:{s:'Insolvente',c:'bg-yellow-500 text-black'}};const lA=async i=>{try{const s=await gD(dO(db,'club_athletes',i));if(s.exists()){const r=s.data(),d={no:r.no||r.nombre,ap:r.ap||r.apellido,ci:r.ci||r.cedulaIdentidad,te:r.te||r.telefono,fN:r.fN||r.fechaNacimiento,ca:r.ca||r.categoria,nc:r.nc??r.nroCamiseta,pe:r.pe||r.peso,ta:r.ta||r.talla,fP:r.fP||r.frecuenciaPago||'mensual',uP:r.uP||r.fechaUltimoPago,mP:r.mP??r.montoPagoMensual??0},f=d.no+' '+d.ap,im=d.pe/(d.ta*d.ta)||0,sv=cS(d.uP,d.fP),ist=gI(im);_('aNT').innerText=f;_('pT').innerText='Ficha: '+f;_('nAp').innerText=f;_('cI').innerText=d.ci||'N/A';_('tel').innerText=d.te||'N/A';_('fNa').innerText=d.fN||'N/A';_('eda').innerText=cE(d.fN)+' años';_('cat').innerText=d.ca||'N/A';_('nCa').innerText=d.nc||'-';_('nomT').innerText=d.fP==='quincenal'?'(Q)':'(M)';_('mPa').innerText=parseFloat(d.mP).toFixed(2);_('uPa').innerText=d.uP||'No registra';_('sSt').innerText=sv.s;_('sSt').className='text-xs font-bold px-2 py-1 rounded-full '+sv.c;_('pes').innerText=d.pe?d.pe+' kg':'N/A';_('tal').innerText=d.ta?d.ta+' m':'N/A';_('imc').innerText=im?im.toFixed(2):'N/A';_('iSt').innerText=ist.t;_('iSt').className='text-[10px] font-bold px-2 py-0.5 rounded-full inline-block '+ist.c;_('tPr').innerText=d.ta?(parseFloat(d.ta)+0.05).toFixed(2)+' m':'N/A';_('lM').classList.add('hidden');_('aD').classList.remove('hidden')}else _('lM').innerText="No encontrado"}catch(e){console.error(e);_('lM').innerText="Error de carga"}};oA(auth,u=>{const i=gP('id');if(u&&i)lA(i);else if(!i) _('lM').innerText="Falta ID"; else window.location.href='index.html'});window.logout=()=>sO(auth).then(()=>location.href='index.html');</script></body></html>
